## 缓存机制是什么

缓存是一种保存并在下次请求是直接使用该副本的技术。当web缓存发现请求的资源已经被储存，它会拦截请求，返回该资源的拷贝，而不会去源服务器重新下载。

缓存需要合理配置，因为并不是所有资源都是永久不变的。重要的是对一个资源的缓存应截止到其下一次发生改变（既不能缓存过期的资源）。



### 缓存的优势

* 缓解服务器的资源消耗和运行压力，提升服务器的整体性能
* 减少服务器资源加载的延迟，进而减少显示某个资源所用的时间
* 减少对宽带造成的压力，避免网络阻塞问题的出现
* Web站点变得更具有响应性



### 缓存应用

常见的HTTP缓存只能存储GET响应，对于其他类型的响应则无能为力：

* 检索请求的成功响应，状态码为200，则表示为成功。包含例如HTML文档，图片，或者文件的响应
* 不变的重定向：响应状态码为301
* 错误响应：状态码为404
* 不完全的响应：状态码为206
* 除了GET请求外，如果匹配到作为一个已被定义的cache键名的响应





## 缓存机制

### 私有缓存

私有缓存只能用于单独用户。浏览器缓存拥有用户通过HTTP下载的所有文档。这些缓存为浏览过的文档提供向后/向前导航、保存页面、查看源码等功能，可以避免再次向服务器发起多余的请求。他同样可以提供缓存内容的离线预览。

```
Cache-Control:private
```



### 共享缓存

共享缓存可以被多个用户使用。例如，ISP或所在的公司可能会架设一个web代理来作为本地网络基础的一部分提供给用户。这样热门的资源就会被重复使用，减少网络拥堵与延迟。

```
Cache-Control:public
```





## 缓存控制

### Cache-Control头

* 禁止进行缓存

  ```
  Cache-Control:no-store
  Cache-Control:no-cache,no-store,must-revalidate
  ```

* 强制确认缓存

  ```
  Cache-Control:no-cache
  ```

* 缓存过期机制

  ```
  Cache-Control:max-age=[毫秒值]
  ```

* 缓存验证确认

  ```
  Cache-Control:must-revalidate
  ```



### pragma头

用于向前兼容HTTP/1.0客户端，响应头不支持该属性

```
Pragma:no-cache
```

